query DataCubes(
  $dataSource: String!
  $locale: String!
  $query: String
  $order: DataCubeResultOrder
  $includeDrafts: Boolean
  $filters: [DataCubeSearchFilter!]
) {
  dataCubes(
    dataSource: $dataSource
    locale: $locale
    query: $query
    order: $order
    includeDrafts: $includeDrafts
    filters: $filters
  ) {
    highlightedTitle
    highlightedDescription
    dataCube {
      iri
      title
      workExamples
      creator {
        iri
        label
      }
      description
      publicationStatus
      datePublished
      themes {
        iri
        label
      }
    }
  }
}

fragment dimensionMetaData on Dimension {
  iri
  label
  isNumerical
  isKeyDimension
  values(dataSource: $dataSource, filters: $filters)
  unit
  related {
    iri
    type
  }
  ... on TemporalDimension {
    timeUnit
    timeFormat
  }
}

query DataCubePreview(
  $iri: String!
  $dataSource: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
) {
  dataCubeByIri(
    iri: $iri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    iri
    title
    description
    publicationStatus
    dimensions(dataSource: $dataSource) {
      ...dimensionMetaData
    }
    measures(dataSource: $dataSource) {
      ...dimensionMetaData
    }
  }
}

query DataCubePreviewObservations(
  $iri: String!
  $dataSource: String!
  $locale: String!
  $dimensions: [String!]
  $latest: Boolean
) {
  dataCubeByIri(
    iri: $iri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    observations(dataSource: $dataSource, dimensions: $dimensions, limit: 10) {
      data
      sparql
    }
  }
}

query DataCubeMetadata(
  $iri: String!
  $dataSource: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(
    iri: $iri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    iri
    identifier
    title
    description
    publisher
    version
    workExamples
    contactName
    contactEmail
    landingPage
    expires
    datePublished
    publicationStatus
    themes {
      iri
      label
    }
    creator {
      iri
      label
    }
  }
}

query DataCubeMetadataWithComponentValues(
  $iri: String!
  $dataSource: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
) {
  dataCubeByIri(
    iri: $iri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    iri
    title
    publisher
    identifier
    workExamples
    creator {
      iri
    }
    dimensions(dataSource: $dataSource) {
      ...dimensionMetaData
    }
    measures(dataSource: $dataSource) {
      ...dimensionMetaData
    }
  }
}

query DimensionValues(
  $dataCubeIri: String!
  $dimensionIri: String!
  $dataSource: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
) {
  dataCubeByIri(
    iri: $dataCubeIri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    dimensionByIri(iri: $dimensionIri, dataSource: $dataSource) {
      ...dimensionMetaData
    }
  }
}

query GeoCoordinatesByDimensionIri(
  $dataCubeIri: String!
  $dimensionIri: String!
  $dataSource: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(
    iri: $dataCubeIri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    dimensionByIri(iri: $dimensionIri, dataSource: $dataSource) {
      ... on GeoCoordinatesDimension {
        geoCoordinates {
          iri
          label
          latitude
          longitude
        }
      }
    }
  }
}

query GeoShapesByDimensionIri(
  $dataCubeIri: String!
  $dimensionIri: String!
  $dataSource: String!
  $locale: String!
  $latest: Boolean
) {
  dataCubeByIri(
    iri: $dataCubeIri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    dimensionByIri(iri: $dimensionIri, dataSource: $dataSource) {
      ... on GeoShapesDimension {
        geoShapes
      }
    }
  }
}

query TemporalDimensionValues(
  $dataCubeIri: String!
  $dimensionIri: String!
  $dataSource: String!
  $locale: String!
  $latest: Boolean
  $filters: Filters
) {
  dataCubeByIri(
    iri: $dataCubeIri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    dimensionByIri(iri: $dimensionIri, dataSource: $dataSource) {
      ... on TemporalDimension {
        ...dimensionMetaData
        timeUnit
        timeFormat
      }
    }
  }
}

query DataCubeObservations(
  $iri: String!
  $dataSource: String!
  $locale: String!
  $dimensions: [String!]
  $filters: Filters
  $latest: Boolean
  $limit: Int
) {
  dataCubeByIri(
    iri: $iri
    dataSource: $dataSource
    locale: $locale
    latest: $latest
  ) {
    iri
    title
    description
    dimensions(dataSource: $dataSource) {
      ...dimensionMetaData
    }
    measures(dataSource: $dataSource) {
      ...dimensionMetaData
    }
    observations(
      dataSource: $dataSource
      dimensions: $dimensions
      filters: $filters
      limit: $limit
    ) {
      data
      sparqlEditorUrl
    }
  }
}

query PossibleFilters($iri: String!, $dataSource: String!, $filters: Filters!) {
  possibleFilters(iri: $iri, dataSource: $dataSource, filters: $filters) {
    iri
    type
    value
  }
}

query Themes($dataSource: String!, $locale: String!) {
  themes(dataSource: $dataSource, locale: $locale) {
    iri
    label
  }
}

query Organizations($dataSource: String!, $locale: String!) {
  organizations(dataSource: $dataSource, locale: $locale) {
    iri
    label
  }
}

query Subthemes($dataSource: String!, $locale: String!, $parentIri: String!) {
  subthemes(dataSource: $dataSource, locale: $locale, parentIri: $parentIri) {
    label
    iri
  }
}

fragment hierarchyValueFields on HierarchyValue {
  value
  dimensionIri
  depth
  label
  hasValue
}

query DimensionHierarchy(
  $dataSource: String!
  $locale: String!
  $cubeIri: String!
  $dimensionIri: String!
) {
  dataCubeByIri(iri: $cubeIri, dataSource: $dataSource, locale: $locale) {
    dimensionByIri(iri: $dimensionIri, dataSource: $dataSource) {
      hierarchy {
        ...hierarchyValueFields
        children {
          ...hierarchyValueFields
          children {
            ...hierarchyValueFields
            children {
              ...hierarchyValueFields
            }
          }
        }
      }
    }
  }
}

query DatasetCount(
  $dataSource: String!
  $theme: String
  $organization: String
  $subtheme: String
  $includeDrafts: Boolean
) {
  datasetcount(
    dataSource: $dataSource
    theme: $theme
    organization: $organization
    subtheme: $subtheme
    includeDrafts: $includeDrafts
  ) {
    count
    iri
  }
}
