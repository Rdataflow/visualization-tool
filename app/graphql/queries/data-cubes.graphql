query DataCubes($locale: String!) {
  dataCubes(locale: $locale) {
    iri
    title
    description
  }
}

fragment componentFields on Component {
  iri
  label
}

fragment dimensionFieldsWithValues on Dimension {
  iri
  label
  values {
    value
    label
  }
}

query DataCubePreview($iri: String!, $locale: String!) {
  dataCubeByIri(iri: $iri, locale: $locale) {
    iri
    title
    description
    dimensions {
      ...componentFields
    }
    measures {
      ...componentFields
    }
  }
}

query DataCubePreviewObservations(
  $iri: String!
  $locale: String!
  $measures: [String!]!
) {
  dataCubeByIri(iri: $iri, locale: $locale) {
    observations(limit: 10, measures: $measures) {
      data
      sparql
    }
  }
}

query DataCubeMetadata($iri: String!, $locale: String!) {
  dataCubeByIri(iri: $iri, locale: $locale) {
    iri
    title
    description
    source
    dateCreated
  }
}

query DataCubeMetadataWithComponents($iri: String!, $locale: String!) {
  dataCubeByIri(iri: $iri, locale: $locale) {
    iri
    title
    dimensions {
      ...componentFields
    }
    measures {
      ...componentFields
    }
  }
}

query DataCubeMetadataWithComponentValues($iri: String!, $locale: String!) {
  dataCubeByIri(iri: $iri, locale: $locale) {
    iri
    title
    dimensions {
      ...dimensionFieldsWithValues
    }
    measures {
      ...componentFields
    }
  }
}

query DimensionValues(
  $dataCubeIri: String!
  $dimensionIri: String!
  $locale: String!
) {
  dataCubeByIri(iri: $dataCubeIri, locale: $locale) {
    dimensionByIri(iri: $dimensionIri) {
      ...dimensionFieldsWithValues
    }
  }
}

query DataCubeObservations(
  $iri: String!
  $locale: String!
  $measures: [String!]!
  $filters: Filters
) {
  dataCubeByIri(iri: $iri, locale: $locale) {
    iri
    title
    description
    contact
    dimensions {
      ...componentFields
    }
    measures {
      ...componentFields
    }
    observations(measures: $measures, filters: $filters) {
      data
    }
  }
}
